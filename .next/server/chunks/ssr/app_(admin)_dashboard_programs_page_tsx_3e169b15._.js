module.exports=[17244,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(15618),e=a.i(87532),f=a.i(24569),g=a.i(81560),h=a.i(84213),i=a.i(36656),j=a.i(60246),k=a.i(41675),l=a.i(53250),m=a.i(38246),n=a.i(78211),o=a.i(37350);function p(){let[a,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)({name:"",type:"single",category:"on_stage",venue:"",startTime:"",duration:30,coordinators:[]});(0,c.useEffect)(()=>{E()},[]),(0,c.useEffect)(()=>{u&&F(u)},[u]);let E=async()=>{try{let a=await l.default.get("/events");a.data.success&&a.data.data.length>0?v(a.data.data[0]._id):r(!1)}catch(a){console.error("Failed to fetch events",a),r(!1)}},F=async a=>{r(!0);try{let b=await l.default.get(`/programs/event/${a}`);b.data.success&&p(b.data.data)}catch(a){(0,n.showError)(a)}finally{r(!1)}},G=async a=>{if(a.preventDefault(),u)try{(await l.default.post("/programs",{...C,event:u})).data.success&&((0,n.showSuccess)("Program created successfully"),x(!1),D({name:"",type:"single",category:"on_stage",venue:"",startTime:"",duration:30,coordinators:[]}),F(u))}catch(a){(0,n.showError)(a)}},H=async a=>{if(a.preventDefault(),A&&u)try{let a={...A,coordinators:A.coordinators?.map(a=>"string"==typeof a?a:a._id)};(await l.default.put(`/programs/${A._id}`,a)).data.success&&((0,n.showSuccess)("Program updated successfully"),z(!1),F(u))}catch(a){(0,n.showError)(a)}},I=async a=>{if(u&&confirm("Are you sure you want to delete this program? This will also remove all registrations for it."))try{(await l.default.delete(`/programs/${a}`)).data.success&&((0,n.showSuccess)("Program deleted successfully"),F(u))}catch(a){(0,n.showError)(a)}},J=a.filter(a=>a.name.toLowerCase().includes(s.toLowerCase())||a.venue.toLowerCase().includes(s.toLowerCase()));return q||u?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Programs"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Managing programs for default event"})]}),(0,b.jsxs)("button",{onClick:()=>x(!0),className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-primary-foreground px-4 py-2 rounded-lg transition-colors",children:[(0,b.jsx)(d.Plus,{className:"h-4 w-4"}),"Create Program"]})]}),w&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 font-sans",children:(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl w-full max-w-md p-6 shadow-2xl overflow-y-auto max-h-[90vh]",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Create New Program"}),(0,b.jsxs)("form",{onSubmit:G,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Program Name"}),(0,b.jsx)("input",{required:!0,className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:C.name,onChange:a=>D({...C,name:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Type"}),(0,b.jsxs)("select",{className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:C.type,onChange:a=>D({...C,type:a.target.value}),children:[(0,b.jsx)("option",{value:"single",children:"Single"}),(0,b.jsx)("option",{value:"group",children:"Group"})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Category"}),(0,b.jsxs)("select",{className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:C.category,onChange:a=>D({...C,category:a.target.value}),children:[(0,b.jsx)("option",{value:"on_stage",children:"On Stage"}),(0,b.jsx)("option",{value:"off_stage",children:"Off Stage"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Venue"}),(0,b.jsx)("input",{required:!0,className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:C.venue,onChange:a=>D({...C,venue:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Start Time"}),(0,b.jsx)("input",{required:!0,type:"datetime-local",className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:C.startTime,onChange:a=>D({...C,startTime:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Duration (mins)"}),(0,b.jsx)("input",{required:!0,type:"number",className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:C.duration,onChange:a=>D({...C,duration:parseInt(a.target.value)})})]})]}),(0,b.jsx)("div",{className:"space-y-1",children:(0,b.jsx)(o.default,{label:"Program Coordinators (Optional)",value:C.coordinators,onChange:a=>D({...C,coordinators:a})})}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,b.jsx)("button",{type:"button",onClick:()=>x(!1),className:"flex-1 px-4 py-2 border border-border rounded-lg text-sm hover:bg-secondary transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-bold hover:bg-primary/90 transition-colors",children:"Create"})]})]})]})}),y&&A&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 font-sans",children:(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl w-full max-w-lg p-6 shadow-2xl overflow-y-auto max-h-[90vh]",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Program"}),(0,b.jsxs)("form",{onSubmit:H,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Program Name"}),(0,b.jsx)("input",{required:!0,className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:A.name,onChange:a=>B({...A,name:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Type"}),(0,b.jsxs)("select",{className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:A.type,onChange:a=>B({...A,type:a.target.value}),children:[(0,b.jsx)("option",{value:"single",children:"Single"}),(0,b.jsx)("option",{value:"group",children:"Group"})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Category"}),(0,b.jsxs)("select",{className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:A.category,onChange:a=>B({...A,category:a.target.value}),children:[(0,b.jsx)("option",{value:"on_stage",children:"On Stage"}),(0,b.jsx)("option",{value:"off_stage",children:"Off Stage"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Venue"}),(0,b.jsx)("input",{required:!0,className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:A.venue,onChange:a=>B({...A,venue:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Start Time"}),(0,b.jsx)("input",{required:!0,type:"datetime-local",className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:new Date(A.startTime).toISOString().slice(0,16),onChange:a=>B({...A,startTime:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Duration (mins)"}),(0,b.jsx)("input",{required:!0,type:"number",className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:A.duration,onChange:a=>B({...A,duration:parseInt(a.target.value)})})]})]}),(0,b.jsx)("div",{className:"space-y-1",children:(0,b.jsx)(o.default,{label:"Program Coordinators",value:A.coordinators?.map(a=>"string"==typeof a?a:a._id)||[],initialData:A.coordinators||[],onChange:a=>B({...A,coordinators:a})})}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,b.jsx)("button",{type:"button",onClick:()=>z(!1),className:"flex-1 px-4 py-2 border border-border rounded-lg text-sm hover:bg-secondary transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-bold hover:bg-primary/90 transition-colors",children:"Save Changes"})]})]})]})}),(0,b.jsxs)("div",{className:"flex items-center px-4 py-2 bg-card border border-border rounded-lg max-w-md",children:[(0,b.jsx)(e.Search,{className:"h-4 w-4 text-muted-foreground mr-2"}),(0,b.jsx)("input",{type:"text",placeholder:"Search programs...",className:"bg-transparent border-none outline-none text-sm w-full",value:s,onChange:a=>t(a.target.value)})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q?(0,b.jsx)("p",{className:"text-muted-foreground col-span-full text-center py-10",children:"Loading programs..."}):0===J.length?(0,b.jsx)("p",{className:"text-muted-foreground col-span-full text-center py-10",children:"No programs found for this event."}):J.map(a=>(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl p-5 hover:border-primary/50 transition-colors group",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:"on_stage"===a.category?(0,b.jsx)(h.Mic2,{className:"h-6 w-6"}):(0,b.jsx)(i.Tv,{className:"h-6 w-6"})}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,b.jsx)("span",{className:`px-2 py-1 rounded-full text-[10px] uppercase font-bold border ${"single"===a.type?"bg-blue-500/10 text-blue-500 border-blue-500/20":"bg-orange-500/10 text-orange-500 border-orange-500/20"}`,children:a.type}),(0,b.jsx)("span",{className:`px-2 py-1 rounded-full text-[10px] uppercase font-bold border ${"on_stage"===a.category?"bg-purple-500/10 text-purple-500 border-purple-500/20":"bg-teal-500/10 text-teal-500 border-teal-500/20"}`,children:a.category.replace("_"," ")})]})]}),(0,b.jsx)("h3",{className:"text-lg font-bold mb-1 truncate",children:a.name}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm mb-4 truncate",children:a.venue}),a.coordinators&&a.coordinators.length>0&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] text-muted-foreground mb-1 uppercase font-bold tracking-wider",children:[(0,b.jsx)(j.Users,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:"Coordinators"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:a.coordinators.map(a=>(0,b.jsx)("span",{className:"text-[10px] bg-secondary px-2 py-0.5 rounded-full border border-border",children:a.name},a._id))})]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1 mb-4",children:[(0,b.jsxs)("p",{children:["Start: ",new Date(a.startTime).toLocaleString()]}),(0,b.jsxs)("p",{children:["Duration: ",a.duration," mins"]})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4 border-t border-border",children:[(0,b.jsx)(m.default,{href:`/dashboard/events/${u}/programs/${a._id}/registrations`,className:"flex-1 py-2 text-sm font-medium bg-primary/10 text-primary hover:bg-primary/20 rounded-lg transition-colors text-center",children:"Registrations"}),(0,b.jsx)("button",{onClick:()=>{B({...a}),z(!0)},className:"p-2 text-muted-foreground hover:text-foreground hover:bg-secondary rounded-lg transition-colors",children:(0,b.jsx)(f.Edit,{className:"h-4 w-4"})}),(0,b.jsx)("button",{onClick:()=>I(a._id),className:"p-2 text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-lg transition-colors",children:(0,b.jsx)(g.Trash2,{className:"h-4 w-4"})})]})]},a._id))})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-10 space-y-4 text-center",children:[(0,b.jsx)(k.Calendar,{className:"h-12 w-12 text-muted-foreground"}),(0,b.jsx)("h2",{className:"text-xl font-bold",children:"No Events Found"}),(0,b.jsx)("p",{className:"text-muted-foreground max-w-sm",children:"You need to create an event in the 'Events' section before you can manage programs."}),(0,b.jsx)(m.default,{href:"/dashboard/events",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90",children:"Go to Events"})]})}a.s(["default",()=>p])}];

//# sourceMappingURL=app_%28admin%29_dashboard_programs_page_tsx_3e169b15._.js.map