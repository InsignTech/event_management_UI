module.exports=[72092,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(15618),e=a.i(87532),f=a.i(24569),g=a.i(81560),h=a.i(53250),i=a.i(67335),j=a.i(78211);function k(){let[a,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(1),[t,u]=(0,c.useState)({total:0,page:1,limit:20,pages:1}),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)({name:"",phone:"",course:"",year:"",gender:"male",college:""});(0,c.useEffect)(()=>{F()},[]),(0,c.useEffect)(()=>{let a=setTimeout(()=>{G(1)},500);return()=>clearTimeout(a)},[n,p]),(0,c.useEffect)(()=>{G(r)},[r]);let F=async()=>{try{let a=await h.default.get("/colleges");a.data.success&&C(a.data.data)}catch(a){(0,j.showError)(a)}},G=async(a=1)=>{m(!0);try{let b=await h.default.get("/students",{params:{college:p||void 0,search:n||void 0,page:a,limit:20}});b.data.success&&(k(b.data.data),u(b.data.pagination))}catch(a){(0,j.showError)(a)}finally{m(!1)}},H=async a=>{a.preventDefault();try{(await h.default.post("/students",D)).data.success&&((0,j.showSuccess)("Student registered successfully"),w(!1),E({name:"",phone:"",course:"",year:"1",gender:"male",college:""}),G())}catch(a){(0,j.showError)(a)}},I=async a=>{if(a.preventDefault(),z)try{let a={...z,college:"object"==typeof z.college?z.college._id:z.college};(await h.default.put(`/students/${z._id}`,a)).data.success&&((0,j.showSuccess)("Student updated successfully"),y(!1),G())}catch(a){(0,j.showError)(a)}},J=async a=>{if(confirm("Are you sure you want to delete this student?"))try{(await h.default.delete(`/students/${a}`)).data.success&&((0,j.showSuccess)("Student deleted successfully"),G())}catch(a){(0,j.showError)(a)}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Students"}),(0,b.jsxs)("button",{onClick:()=>w(!0),className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-primary-foreground px-4 py-2 rounded-lg transition-colors",children:[(0,b.jsx)(d.Plus,{className:"h-4 w-4"}),"Register Student"]})]}),v&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 font-sans",children:(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl w-full max-w-md p-6 shadow-2xl overflow-y-auto max-h-[90vh]",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Register New Student"}),(0,b.jsxs)("form",{onSubmit:H,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Student Name"}),(0,b.jsx)("input",{required:!0,className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:D.name,onChange:a=>E({...D,name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Phone Number"}),(0,b.jsx)("input",{required:!0,maxLength:10,type:"tel",className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:D.phone,onChange:a=>{let b=a.target.value.replace(/\D/g,"");b.length<=10&&E({...D,phone:b})}})]}),(0,b.jsx)(i.default,{label:"College",options:B,value:D.college,onChange:a=>E({...D,college:a}),placeholder:"Select College"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Course (Optional)"}),(0,b.jsx)("input",{className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",placeholder:"e.g. BCA, B.Sc Computer Science",value:D.course,onChange:a=>E({...D,course:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Year (Optional)"}),(0,b.jsxs)("select",{className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:D.year,onChange:a=>E({...D,year:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Select Year"}),(0,b.jsx)("option",{value:"1",children:"1st Year"}),(0,b.jsx)("option",{value:"2",children:"2nd Year"}),(0,b.jsx)("option",{value:"3",children:"3rd Year"}),(0,b.jsx)("option",{value:"4",children:"4th Year"})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Gender"}),(0,b.jsxs)("select",{className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:D.gender,onChange:a=>E({...D,gender:a.target.value}),children:[(0,b.jsx)("option",{value:"male",children:"Male"}),(0,b.jsx)("option",{value:"female",children:"Female"}),(0,b.jsx)("option",{value:"other",children:"Other"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,b.jsx)("button",{type:"button",onClick:()=>w(!1),className:"flex-1 px-4 py-2 border border-border rounded-lg text-sm hover:bg-secondary transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-bold hover:bg-primary/90 transition-colors",children:"Register"})]})]})]})}),x&&z&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 font-sans",children:(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl w-full max-w-md p-6 shadow-2xl overflow-y-auto max-h-[90vh]",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Student"}),(0,b.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Registration Code"}),(0,b.jsx)("input",{disabled:!0,className:"w-full bg-secondary/50 border border-border rounded-lg px-3 py-2 text-sm outline-none cursor-not-allowed",value:z.registrationCode||""})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Student Name"}),(0,b.jsx)("input",{required:!0,className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:z.name||"",onChange:a=>A({...z,name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Phone Number"}),(0,b.jsx)("input",{required:!0,maxLength:10,type:"tel",className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:z.phone,onChange:a=>{let b=a.target.value.replace(/\D/g,"");b.length<=10&&A({...z,phone:b})}})]}),(0,b.jsx)(i.default,{label:"College",options:B,value:"object"==typeof z.college?z.college._id:z.college,onChange:a=>A({...z,college:a}),placeholder:"Select College"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Course (Optional)"}),(0,b.jsx)("input",{className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:z.course,onChange:a=>A({...z,course:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Year (Optional)"}),(0,b.jsxs)("select",{className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:z.year||"",onChange:a=>A({...z,year:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Select Year"}),(0,b.jsx)("option",{value:"1",children:"1st Year"}),(0,b.jsx)("option",{value:"2",children:"2nd Year"}),(0,b.jsx)("option",{value:"3",children:"3rd Year"}),(0,b.jsx)("option",{value:"4",children:"4th Year"})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Gender"}),(0,b.jsxs)("select",{className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary",value:z.gender,onChange:a=>A({...z,gender:a.target.value}),children:[(0,b.jsx)("option",{value:"male",children:"Male"}),(0,b.jsx)("option",{value:"female",children:"Female"}),(0,b.jsx)("option",{value:"other",children:"Other"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,b.jsx)("button",{type:"button",onClick:()=>y(!1),className:"flex-1 px-4 py-2 border border-border rounded-lg text-sm hover:bg-secondary transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-bold hover:bg-primary/90 transition-colors",children:"Save Changes"})]})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsx)("div",{className:"w-full",children:(0,b.jsx)(i.default,{label:"Filter by College",options:[{_id:"",name:"All Colleges"},...B],value:p,onChange:a=>{q(a),s(1)},placeholder:"Select College"})}),(0,b.jsx)("div",{className:"flex items-end",children:(0,b.jsxs)("div",{className:"flex items-center px-4 py-2 bg-card border border-border rounded-lg w-full h-[42px]",children:[(0,b.jsx)(e.Search,{className:"h-4 w-4 text-muted-foreground mr-2"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by ID, Name, Phone...",className:"bg-transparent border-none outline-none text-sm w-full",value:n,onChange:a=>{o(a.target.value),s(1)}})]})})]}),(0,b.jsx)("div",{className:"bg-card border border-border rounded-xl overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,b.jsx)("thead",{className:"bg-muted/50 text-muted-foreground uppercase text-xs font-bold",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4",children:"Student Name"}),(0,b.jsx)("th",{className:"px-6 py-4",children:"Reg Code"}),(0,b.jsx)("th",{className:"px-6 py-4",children:"Phone"}),(0,b.jsx)("th",{className:"px-6 py-4",children:"Course & Year"}),(0,b.jsx)("th",{className:"px-6 py-4",children:"College"}),(0,b.jsx)("th",{className:"px-6 py-4",children:"Gender"}),(0,b.jsx)("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:l?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"px-6 py-8 text-center text-muted-foreground",children:"Loading students..."})}):0===a.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"px-6 py-8 text-center text-muted-foreground",children:"No students found."})}):a.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-muted/30 transition-colors group",children:[(0,b.jsx)("td",{className:"px-6 py-4 font-medium",children:a.name||(0,b.jsx)("span",{className:"text-muted-foreground italic text-xs",children:"N/A"})}),(0,b.jsx)("td",{className:"px-6 py-4 font-mono text-xs",children:a.registrationCode}),(0,b.jsx)("td",{className:"px-6 py-4 font-mono text-xs",children:a.phone}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{children:a.course}),a.year&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[a.year," Year"]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 text-muted-foreground",children:a.college?.name}),(0,b.jsx)("td",{className:"px-6 py-4 capitalize",children:a.gender}),(0,b.jsxs)("td",{className:"px-6 py-4 text-right space-x-2",children:[(0,b.jsx)("button",{onClick:()=>{A({...a}),y(!0)},className:"p-2 hover:bg-secondary rounded-lg text-muted-foreground hover:text-foreground transition-all",children:(0,b.jsx)(f.Edit,{className:"h-4 w-4"})}),(0,b.jsx)("button",{onClick:()=>J(a._id),className:"p-2 hover:bg-destructive/10 rounded-lg text-muted-foreground hover:text-destructive transition-all",children:(0,b.jsx)(g.Trash2,{className:"h-4 w-4"})})]})]},a._id))})]})})}),t.pages>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Showing ",(t.page-1)*t.limit+1," to ",Math.min(t.page*t.limit,t.total)," of ",t.total," students"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{disabled:1===t.page,onClick:()=>s(a=>a-1),className:"px-3 py-1.5 text-xs font-bold border border-border rounded-lg hover:bg-muted disabled:opacity-50 transition-colors",children:"Previous"}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,t.pages)},(a,c)=>{let d;return d=t.pages<=5||t.page<=3?c+1:t.page>=t.pages-2?t.pages-4+c:t.page-2+c,(0,b.jsx)("button",{onClick:()=>s(d),className:`w-8 h-8 text-xs font-bold rounded-lg transition-colors ${t.page===d?"bg-primary text-primary-foreground":"border border-border hover:bg-muted"}`,children:d},d)})}),(0,b.jsx)("button",{disabled:t.page===t.pages,onClick:()=>s(a=>a+1),className:"px-3 py-1.5 text-xs font-bold border border-border rounded-lg hover:bg-muted disabled:opacity-50 transition-colors",children:"Next"})]})]})]})}a.s(["default",()=>k])}];

//# sourceMappingURL=app_%28admin%29_dashboard_students_page_tsx_00b6b78c._.js.map