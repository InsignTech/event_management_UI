{"version":3,"sources":["../../../../app/%28admin%29/dashboard/students/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Plus, Search, Edit, Trash2, User as UserIcon } from 'lucide-react';\r\nimport api from '@/lib/api';\r\nimport SearchableSelect from '@/components/SearchableSelect';\r\nimport { showError, showSuccess } from '@/lib/toast';\r\n\r\ninterface Student {\r\n    _id: string;\r\n    name?: string;\r\n    registrationCode: string;\r\n    phone: string;\r\n    course: string;\r\n    year: string;\r\n    gender: string;\r\n    college: {\r\n        _id: string;\r\n        name: string;\r\n    };\r\n}\r\n\r\nexport default function StudentsPage() {\r\n    const [students, setStudents] = useState<Student[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [selectedCollege, setSelectedCollege] = useState('');\r\n    const [page, setPage] = useState(1);\r\n    const [pagination, setPagination] = useState({\r\n        total: 0,\r\n        page: 1,\r\n        limit: 20,\r\n        pages: 1\r\n    });\r\n\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n    const [currentStudent, setCurrentStudent] = useState<any>(null);\r\n    const [colleges, setColleges] = useState<{_id: string, name: string}[]>([]);\r\n    const [newStudent, setNewStudent] = useState({\r\n        name: '',\r\n        phone: '',\r\n        course: '',\r\n        year: '',\r\n        gender: 'male',\r\n        college: '',\r\n    });\r\n\r\n    useEffect(() => {\r\n        fetchColleges();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const delayDebounceFn = setTimeout(() => {\r\n            fetchStudents(1); // Reset to page 1 on search or filter change\r\n        }, 500);\r\n\r\n        return () => clearTimeout(delayDebounceFn);\r\n    }, [searchTerm, selectedCollege]);\r\n\r\n    useEffect(() => {\r\n        fetchStudents(page);\r\n    }, [page]);\r\n\r\n    const fetchColleges = async () => {\r\n        try {\r\n            const res = await api.get('/colleges');\r\n            if (res.data.success) {\r\n                setColleges(res.data.data);\r\n            }\r\n        } catch (error) {\r\n            showError(error);\r\n        }\r\n    };\r\n\r\n    const fetchStudents = async (targetPage = 1) => {\r\n        setLoading(true);\r\n        try {\r\n            const res = await api.get('/students', {\r\n                params: {\r\n                    college: selectedCollege || undefined,\r\n                    search: searchTerm || undefined,\r\n                    page: targetPage,\r\n                    limit: 20\r\n                }\r\n            });\r\n            if (res.data.success) {\r\n                setStudents(res.data.data);\r\n                setPagination(res.data.pagination);\r\n            }\r\n        } catch (error) {\r\n            showError(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCreate = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        try {\r\n            const res = await api.post('/students', newStudent);\r\n            if (res.data.success) {\r\n                showSuccess('Student registered successfully');\r\n                setIsModalOpen(false);\r\n                setNewStudent({\r\n                    name: '',\r\n                    phone: '',\r\n                    course: '',\r\n                    year: '1',\r\n                    gender: 'male',\r\n                    college: '',\r\n                });\r\n                fetchStudents();\r\n            }\r\n        } catch (error) {\r\n            showError(error);\r\n        }\r\n    };\r\n\r\n    const handleUpdate = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!currentStudent) return;\r\n        try {\r\n            const updateData = {\r\n                ...currentStudent,\r\n                college: typeof currentStudent.college === 'object' ? currentStudent.college._id : currentStudent.college\r\n            };\r\n            const res = await api.put(`/students/${currentStudent._id}`, updateData);\r\n            if (res.data.success) {\r\n                showSuccess('Student updated successfully');\r\n                setIsEditModalOpen(false);\r\n                fetchStudents();\r\n            }\r\n        } catch (error) {\r\n            showError(error);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: string) => {\r\n        if (!confirm('Are you sure you want to delete this student?')) return;\r\n        try {\r\n            const res = await api.delete(`/students/${id}`);\r\n            if (res.data.success) {\r\n                showSuccess('Student deleted successfully');\r\n                fetchStudents();\r\n            }\r\n        } catch (error) {\r\n            showError(error);\r\n        }\r\n    };\r\n\r\n    // Backend-driven results\r\n    const filteredStudents = students;\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n                <h1 className=\"text-3xl font-bold\">Students</h1>\r\n                <button \r\n                    onClick={() => setIsModalOpen(true)}\r\n                    className=\"flex items-center gap-2 bg-primary hover:bg-primary/90 text-primary-foreground px-4 py-2 rounded-lg transition-colors\"\r\n                >\r\n                    <Plus className=\"h-4 w-4\" />\r\n                    Register Student\r\n                </button>\r\n            </div>\r\n\r\n            {/* Register Modal */}\r\n            {isModalOpen && (\r\n                <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 font-sans\">\r\n                    <div className=\"bg-card border border-border rounded-xl w-full max-w-md p-6 shadow-2xl overflow-y-auto max-h-[90vh]\">\r\n                        <h2 className=\"text-xl font-bold mb-4\">Register New Student</h2>\r\n                        <form onSubmit={handleCreate} className=\"space-y-4\">\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-xs text-muted-foreground\">Student Name</label>\r\n                                <input \r\n                                    required\r\n                                    className=\"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary\"\r\n                                    value={newStudent.name}\r\n                                    onChange={e => setNewStudent({...newStudent, name: e.target.value})}\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-xs text-muted-foreground\">Phone Number</label>\r\n                                <input \r\n                                    required\r\n                                    maxLength={10}\r\n                                    type=\"tel\"\r\n                                    className=\"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary\"\r\n                                    value={newStudent.phone}\r\n                                    onChange={e => {\r\n                                        const val = e.target.value.replace(/\\D/g, '');\r\n                                        if (val.length <= 10) setNewStudent({...newStudent, phone: val});\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                            <SearchableSelect \r\n                                label=\"College\"\r\n                                options={colleges}\r\n                                value={newStudent.college}\r\n                                onChange={val => setNewStudent({...newStudent, college: val})}\r\n                                placeholder=\"Select College\"\r\n                            />\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-xs text-muted-foreground\">Course (Optional)</label>\r\n                                <input \r\n                                    className=\"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary\"\r\n                                    placeholder=\"e.g. BCA, B.Sc Computer Science\"\r\n                                    value={newStudent.course}\r\n                                    onChange={e => setNewStudent({...newStudent, course: e.target.value})}\r\n                                />\r\n                            </div>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-1\">\r\n                                    <label className=\"text-xs text-muted-foreground\">Year (Optional)</label>\r\n                                    <select \r\n                                        className=\"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary\"\r\n                                        value={newStudent.year}\r\n                                        onChange={e => setNewStudent({...newStudent, year: e.target.value})}\r\n                                    >\r\n                                        <option value=\"\">Select Year</option>\r\n                                        <option value=\"1\">1st Year</option>\r\n                                        <option value=\"2\">2nd Year</option>\r\n                                        <option value=\"3\">3rd Year</option>\r\n                                        <option value=\"4\">4th Year</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"space-y-1\">\r\n                                    <label className=\"text-xs text-muted-foreground\">Gender</label>\r\n                                    <select \r\n                                        className=\"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary\"\r\n                                        value={newStudent.gender}\r\n                                        onChange={e => setNewStudent({...newStudent, gender: e.target.value})}\r\n                                    >\r\n                                        <option value=\"male\">Male</option>\r\n                                        <option value=\"female\">Female</option>\r\n                                        <option value=\"other\">Other</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex gap-3 mt-6\">\r\n                                <button \r\n                                    type=\"button\"\r\n                                    onClick={() => setIsModalOpen(false)}\r\n                                    className=\"flex-1 px-4 py-2 border border-border rounded-lg text-sm hover:bg-secondary transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button \r\n                                    type=\"submit\"\r\n                                    className=\"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-bold hover:bg-primary/90 transition-colors\"\r\n                                >\r\n                                    Register\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Edit Modal */}\r\n            {isEditModalOpen && currentStudent && (\r\n                <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 font-sans\">\r\n                    <div className=\"bg-card border border-border rounded-xl w-full max-w-md p-6 shadow-2xl overflow-y-auto max-h-[90vh]\">\r\n                        <h2 className=\"text-xl font-bold mb-4\">Edit Student</h2>\r\n                        <form onSubmit={handleUpdate} className=\"space-y-4\">\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-xs text-muted-foreground\">Registration Code</label>\r\n                                <input \r\n                                    disabled\r\n                                    className=\"w-full bg-secondary/50 border border-border rounded-lg px-3 py-2 text-sm outline-none cursor-not-allowed\"\r\n                                    value={currentStudent.registrationCode || ''}\r\n                                />\r\n                            </div>\r\n                             <div className=\"space-y-1\">\r\n                                <label className=\"text-xs text-muted-foreground\">Student Name</label>\r\n                                <input \r\n                                    required\r\n                                    className=\"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary\"\r\n                                    value={currentStudent.name || ''}\r\n                                    onChange={e => setCurrentStudent({...currentStudent, name: e.target.value})}\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-xs text-muted-foreground\">Phone Number</label>\r\n                                <input \r\n                                    required\r\n                                    maxLength={10}\r\n                                    type=\"tel\"\r\n                                    className=\"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary\"\r\n                                    value={currentStudent.phone}\r\n                                    onChange={e => {\r\n                                        const val = e.target.value.replace(/\\D/g, '');\r\n                                        if (val.length <= 10) setCurrentStudent({...currentStudent, phone: val});\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                            <SearchableSelect \r\n                                label=\"College\"\r\n                                options={colleges}\r\n                                value={typeof currentStudent.college === 'object' ? currentStudent.college._id : currentStudent.college}\r\n                                onChange={val => setCurrentStudent({...currentStudent, college: val})}\r\n                                placeholder=\"Select College\"\r\n                            />\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-xs text-muted-foreground\">Course (Optional)</label>\r\n                                <input \r\n                                    className=\"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary\"\r\n                                    value={currentStudent.course}\r\n                                    onChange={e => setCurrentStudent({...currentStudent, course: e.target.value})}\r\n                                />\r\n                            </div>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-1\">\r\n                                    <label className=\"text-xs text-muted-foreground\">Year (Optional)</label>\r\n                                    <select \r\n                                        className=\"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary\"\r\n                                        value={currentStudent.year || ''}\r\n                                        onChange={e => setCurrentStudent({...currentStudent, year: e.target.value})}\r\n                                    >\r\n                                        <option value=\"\">Select Year</option>\r\n                                        <option value=\"1\">1st Year</option>\r\n                                        <option value=\"2\">2nd Year</option>\r\n                                        <option value=\"3\">3rd Year</option>\r\n                                        <option value=\"4\">4th Year</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"space-y-1\">\r\n                                    <label className=\"text-xs text-muted-foreground\">Gender</label>\r\n                                    <select \r\n                                        className=\"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm outline-none focus:border-primary\"\r\n                                        value={currentStudent.gender}\r\n                                        onChange={e => setCurrentStudent({...currentStudent, gender: e.target.value})}\r\n                                    >\r\n                                        <option value=\"male\">Male</option>\r\n                                        <option value=\"female\">Female</option>\r\n                                        <option value=\"other\">Other</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex gap-3 mt-6\">\r\n                                <button \r\n                                    type=\"button\"\r\n                                    onClick={() => setIsEditModalOpen(false)}\r\n                                    className=\"flex-1 px-4 py-2 border border-border rounded-lg text-sm hover:bg-secondary transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button \r\n                                    type=\"submit\"\r\n                                    className=\"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-bold hover:bg-primary/90 transition-colors\"\r\n                                >\r\n                                    Save Changes\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"w-full\">\r\n                    <SearchableSelect \r\n                        label=\"Filter by College\"\r\n                        options={[{_id: '', name: 'All Colleges'}, ...colleges]}\r\n                        value={selectedCollege}\r\n                        onChange={val => {\r\n                            setSelectedCollege(val);\r\n                            setPage(1);\r\n                        }}\r\n                        placeholder=\"Select College\"\r\n                    />\r\n                </div>\r\n                <div className=\"flex items-end\">\r\n                    <div className=\"flex items-center px-4 py-2 bg-card border border-border rounded-lg w-full h-[42px]\">\r\n                        <Search className=\"h-4 w-4 text-muted-foreground mr-2\" />\r\n                        <input \r\n                            type=\"text\" \r\n                            placeholder=\"Search by ID, Name, Phone...\" \r\n                            className=\"bg-transparent border-none outline-none text-sm w-full\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => {\r\n                                setSearchTerm(e.target.value);\r\n                                setPage(1);\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"bg-card border border-border rounded-xl overflow-hidden\">\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-sm text-left\">\r\n                        <thead className=\"bg-muted/50 text-muted-foreground uppercase text-xs font-bold\">\r\n                            <tr>\r\n                                <th className=\"px-6 py-4\">Student Name</th>\r\n                                <th className=\"px-6 py-4\">Reg Code</th>\r\n                                <th className=\"px-6 py-4\">Phone</th>\r\n                                <th className=\"px-6 py-4\">Course & Year</th>\r\n                                <th className=\"px-6 py-4\">College</th>\r\n                                <th className=\"px-6 py-4\">Gender</th>\r\n                                <th className=\"px-6 py-4 text-right\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-border\">\r\n                            {loading ? (\r\n                                <tr><td colSpan={7} className=\"px-6 py-8 text-center text-muted-foreground\">Loading students...</td></tr>\r\n                            ) : filteredStudents.length === 0 ? (\r\n                                <tr><td colSpan={7} className=\"px-6 py-8 text-center text-muted-foreground\">No students found.</td></tr>\r\n                            ) : (\r\n                                filteredStudents.map((student) => (\r\n                                    <tr key={student._id} className=\"hover:bg-muted/30 transition-colors group\">\r\n                                        <td className=\"px-6 py-4 font-medium\">{student.name || <span className=\"text-muted-foreground italic text-xs\">N/A</span>}</td>\r\n                                        <td className=\"px-6 py-4 font-mono text-xs\">{student.registrationCode}</td>\r\n                                        <td className=\"px-6 py-4 font-mono text-xs\">{student.phone}</td>\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <div className=\"flex flex-col\">\r\n                                                <span>{student.course}</span>\r\n                                                {student.year && <span className=\"text-xs text-muted-foreground\">{student.year} Year</span>}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 text-muted-foreground\">{student.college?.name}</td>\r\n                                        <td className=\"px-6 py-4 capitalize\">{student.gender}</td>\r\n                                        <td className=\"px-6 py-4 text-right space-x-2\">\r\n                                            <button \r\n                                                onClick={() => { setCurrentStudent({...student}); setIsEditModalOpen(true); }}\r\n                                                className=\"p-2 hover:bg-secondary rounded-lg text-muted-foreground hover:text-foreground transition-all\"\r\n                                            >\r\n                                                <Edit className=\"h-4 w-4\" />\r\n                                            </button>\r\n                                            <button \r\n                                                onClick={() => handleDelete(student._id)}\r\n                                                className=\"p-2 hover:bg-destructive/10 rounded-lg text-muted-foreground hover:text-destructive transition-all\"\r\n                                            >\r\n                                                <Trash2 className=\"h-4 w-4\" />\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Pagination */}\r\n            {pagination.pages > 1 && (\r\n                <div className=\"flex items-center justify-between px-2\">\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                        Showing {(pagination.page - 1) * pagination.limit + 1} to {Math.min(pagination.page * pagination.limit, pagination.total)} of {pagination.total} students\r\n                    </p>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <button\r\n                            disabled={pagination.page === 1}\r\n                            onClick={() => setPage(p => p - 1)}\r\n                            className=\"px-3 py-1.5 text-xs font-bold border border-border rounded-lg hover:bg-muted disabled:opacity-50 transition-colors\"\r\n                        >\r\n                            Previous\r\n                        </button>\r\n                        <div className=\"flex items-center gap-1\">\r\n                            {Array.from({ length: Math.min(5, pagination.pages) }, (_, i) => {\r\n                                let pageNum;\r\n                                if (pagination.pages <= 5) pageNum = i + 1;\r\n                                else if (pagination.page <= 3) pageNum = i + 1;\r\n                                else if (pagination.page >= pagination.pages - 2) pageNum = pagination.pages - 4 + i;\r\n                                else pageNum = pagination.page - 2 + i;\r\n\r\n                                return (\r\n                                    <button\r\n                                        key={pageNum}\r\n                                        onClick={() => setPage(pageNum)}\r\n                                        className={`w-8 h-8 text-xs font-bold rounded-lg transition-colors ${\r\n                                            pagination.page === pageNum \r\n                                            ? 'bg-primary text-primary-foreground' \r\n                                            : 'border border-border hover:bg-muted'\r\n                                        }`}\r\n                                    >\r\n                                        {pageNum}\r\n                                    </button>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                        <button\r\n                            disabled={pagination.page === pagination.pages}\r\n                            onClick={() => setPage(p => p + 1)}\r\n                            className=\"px-3 py-1.5 text-xs font-bold border border-border rounded-lg hover:bg-muted disabled:opacity-50 transition-colors\"\r\n                        >\r\n                            Next\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}