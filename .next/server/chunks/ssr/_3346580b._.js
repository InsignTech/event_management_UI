module.exports=[87532,a=>{"use strict";let b=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],87532)},78211,a=>{"use strict";var b=a.i(6704);a.s(["showError",0,a=>{let c,d=(c=a.response?.data,c?.errors&&Array.isArray(c.errors)&&c.errors.length>0?c.errors.map(a=>a.message||a).join(", "):c?.message?c.message:a.message||"An unexpected error occurred");b.toast.error(d,{style:{borderRadius:"10px",background:"#333",color:"#fff"}})},"showSuccess",0,a=>{b.toast.success(a,{style:{borderRadius:"10px",background:"#333",color:"#fff"}})}])},43108,a=>{"use strict";let b=(0,a.i(70106).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],43108)},50522,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["ChevronRight",()=>b],50522)},21374,13749,16201,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);a.s(["Star",()=>c],21374);let d=(0,b.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>d],13749);let e=(0,b.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>e],16201)},10743,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(83077),e=a.i(87532),f=a.i(21374),g=a.i(70106);let h=(0,g.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var i=a.i(13749),j=a.i(50522);let k=(0,g.default)("share",[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]]);var l=a.i(16201),m=a.i(43108),n=a.i(53250),o=a.i(78211);function p(){let[a,g]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)("none"),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(1),[D,E]=(0,c.useState)(""),F=(0,c.useMemo)(()=>p.find(a=>a._id===x),[p,x]);(0,c.useEffect)(()=>{let a=setTimeout(()=>{E(v)},500);return()=>clearTimeout(a)},[v]),(0,c.useEffect)(()=>{G()},[]),(0,c.useEffect)(()=>{"none"!==x?H(B,D):(g([]),A(null))},[x,B,D]);let G=async()=>{try{u(!0);let a=await n.default.get("/programs");a.data.success&&q(a.data.data)}catch(a){console.error("Failed to fetch programs",a)}finally{u(!1)}},H=async(a,b="")=>{try{s(!0);let c=await n.default.get(`/registrations/program/${x}?page=${a}&limit=20&search=${b}`);c.data.success&&(g(c.data.registrations),A(c.data.pagination))}catch(a){console.error("Failed to fetch registrations",a)}finally{s(!1)}},I=async()=>{if("none"!==x&&confirm("Are you sure you want to publish the results? This will finalize the scores and make them public. This action cannot be undone."))try{(await n.default.post(`/programs/${x}/publish`)).data.success&&((0,o.showSuccess)("Results published successfully"),G())}catch(a){(0,o.showError)(a)}},[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)(!1),R=async a=>{if(a.preventDefault(),L&&N&&x){Q(!0);try{(await n.default.post("/scores/submit",{programId:x,registrationId:L._id,criteria:{Mark:parseFloat(N)}})).data.success&&((0,o.showSuccess)("Score submitted successfully"),K(!1),O(""),M(null),H(B,D))}catch(a){(0,o.showError)(a)}finally{Q(!1)}}},S=F?.isResultPublished||!1;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Scoring & Results"}),"none"!==x&&(0,b.jsx)("div",{className:"flex items-center gap-2",children:S?(0,b.jsxs)("span",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-500/10 text-green-500 rounded-full text-sm font-semibold border border-green-500/20",children:[(0,b.jsx)(l.CheckCircle,{className:"h-4 w-4"}),"Results Published"]}):(0,b.jsxs)("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium text-sm",children:[(0,b.jsx)(k,{className:"h-4 w-4"}),"Publish Results"]})})]}),J&&L&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 font-sans text-foreground transition-all backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl w-full max-w-sm p-6 shadow-2xl animate-in fade-in zoom-in duration-200",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold mb-2 flex items-center gap-2",children:[(0,b.jsx)(d.Trophy,{className:"h-5 w-5 text-yellow-500"}),"Edit Score"]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mb-6",children:["Update marks for chest number ",(0,b.jsx)("span",{className:"font-bold text-primary",children:L.chestNumber})]}),(0,b.jsxs)("form",{onSubmit:R,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-xs font-medium text-muted-foreground",children:"Marks / Points"}),(0,b.jsx)("input",{type:"number",step:"0.01",autoFocus:!0,required:!0,className:"w-full bg-secondary border border-border rounded-lg px-4 py-3 text-lg font-bold outline-none focus:border-primary text-center",placeholder:"0.00",value:N,onChange:a=>O(a.target.value)})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-8",children:[(0,b.jsx)("button",{type:"button",onClick:()=>K(!1),className:"flex-1 px-4 py-2 border border-border rounded-lg text-sm hover:bg-secondary transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:P,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-bold hover:bg-primary/90 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:P?"Updating...":"Update Score"})]})]})]})}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center",children:[(0,b.jsxs)("div",{className:"flex items-center px-4 py-2 bg-card border border-border rounded-lg w-full max-w-md",children:[(0,b.jsx)(e.Search,{className:"h-4 w-4 text-muted-foreground mr-2"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by Chest No or Reg No...",className:"bg-transparent border-none outline-none text-sm w-full",value:v,onChange:a=>{w(a.target.value),C(1)},disabled:"none"===x})]}),(0,b.jsxs)("div",{className:"flex items-center px-3 py-2 bg-card border border-border rounded-lg w-full md:w-64",children:[(0,b.jsx)(h,{className:"h-4 w-4 text-muted-foreground mr-2"}),(0,b.jsxs)("select",{className:"bg-transparent border-none outline-none text-sm w-full cursor-pointer text-foreground appearance-none focus:ring-0",value:x,onChange:a=>{y(a.target.value),C(1),w("")},disabled:t,children:[(0,b.jsx)("option",{value:"none",className:"bg-card text-foreground",children:"Select a Program"}),p.map(a=>(0,b.jsxs)("option",{value:a._id,className:"bg-card text-foreground",children:[a.name," ",a.isResultPublished?"(Published)":""]},a._id))]})]})]}),(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl overflow-hidden",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,b.jsx)("thead",{className:"bg-muted/50 text-muted-foreground uppercase text-xs",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3",children:"Chest No"}),(0,b.jsx)("th",{className:"px-6 py-3",children:"Program"}),(0,b.jsx)("th",{className:"px-6 py-3",children:"Participants"}),(0,b.jsx)("th",{className:"px-6 py-3",children:"Rank"}),(0,b.jsx)("th",{className:"px-6 py-3",children:"Points"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:t||r?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"px-6 py-8 text-center text-muted-foreground",children:"Loading..."})}):"none"===x?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"px-6 py-8 text-center text-muted-foreground",children:"Please select a program to view results."})}):0===a.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"px-6 py-8 text-center text-muted-foreground",children:"No results found for this program."})}):a.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-muted/30 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4 font-mono font-bold",children:a.chestNumber}),(0,b.jsxs)("td",{className:"px-6 py-4",children:[(0,b.jsx)("p",{className:"font-bold",children:a.program.name}),(0,b.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase",children:a.program.type})]}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("div",{className:"flex flex-col gap-0.5",children:a.participants.map((a,c)=>(0,b.jsx)("span",{className:"text-xs",children:a.registrationCode},c))})}),(0,b.jsx)("td",{className:"px-6 py-4",children:a.rank?(0,b.jsxs)("span",{className:`flex items-center gap-1 font-bold ${1===a.rank?"text-yellow-500":2===a.rank?"text-slate-400":3===a.rank?"text-amber-700":""}`,children:[(0,b.jsx)(f.Star,{className:"h-3 w-3 fill-current"}),a.rank]}):"-"}),(0,b.jsx)("td",{className:"px-6 py-4 font-bold",children:a.pointsObtained||0}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:S?(0,b.jsxs)("button",{disabled:!0,className:"text-muted-foreground/50 cursor-not-allowed flex items-center gap-1 text-xs font-bold ml-auto",children:[(0,b.jsx)(m.Lock,{className:"h-3 w-3"}),"Locked"]}):(0,b.jsx)("button",{onClick:()=>{M(a),O(a.pointsObtained?.toString()||""),K(!0)},className:"text-primary hover:underline text-xs font-bold",children:"Edit Score"})})]},a._id))})]})}),z&&z.pages>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 bg-muted/20 border-t border-border",children:[(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Showing ",(B-1)*z.limit+1," to ",Math.min(B*z.limit,z.total)," of ",z.total," results"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>C(a=>Math.max(1,a-1)),disabled:1===B,className:"p-1 rounded hover:bg-muted disabled:opacity-50",children:(0,b.jsx)(i.ChevronLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("span",{className:"text-xs font-medium",children:["Page ",B," of ",z.pages]}),(0,b.jsx)("button",{onClick:()=>C(a=>Math.min(z.pages,a+1)),disabled:B===z.pages,className:"p-1 rounded hover:bg-muted disabled:opacity-50",children:(0,b.jsx)(j.ChevronRight,{className:"h-4 w-4"})})]})]})]})]})}a.s(["default",()=>p],10743)}];

//# sourceMappingURL=_3346580b._.js.map